{
  "version": 1,
  "minor_version": 1,
  "key": "lovelace",
  "data": {
    "config": {
      "views": [
        {
          "theme": "Backend-selected",
          "title": "Home",
          "type": "custom:masonry-layout",
          "layout": {
            "width": 300,
            "max_cols": 8
          },
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "cards": [
                {
                  "type": "gauge",
                  "entity": "sensor.monthly_energy_cost",
                  "name": "Monthly Cost",
                  "unit": "ZAR",
                  "min": 0,
                  "max": 1000,
                  "needle": true,
                  "severity": {
                    "green": 0,
                    "yellow": 600,
                    "red": 800
                  }
                },
                {
                  "type": "gauge",
                  "entity": "sensor.power_usage_696087",
                  "name": "Grid Usage",
                  "unit": "W",
                  "min": 0,
                  "max": 8000,
                  "needle": true,
                  "severity": {
                    "green": 0,
                    "yellow": 500,
                    "red": 1100
                  }
                }
              ],
              "title": "Eskom Grid Power"
            },
            {
              "type": "gauge",
              "entity": "sensor.front_gate_battery",
              "needle": true,
              "severity": {
                "green": 70,
                "yellow": 40,
                "red": 0
              }
            },
            {
              "show_state": true,
              "show_name": true,
              "camera_view": "live",
              "type": "picture-entity",
              "entity": "camera.front_gate"
            },
            {
              "type": "map",
              "entities": [
                {
                  "entity": "person.danie"
                }
              ],
              "dark_mode": true,
              "title": "Where is Danie?",
              "hours_to_show": 1,
              "default_zoom": 14
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "gauge",
                  "entity": "sensor.battery_soc",
                  "needle": true,
                  "name": "Battery Charge",
                  "severity": {
                    "green": 50,
                    "yellow": 25,
                    "red": 0
                  }
                },
                {
                  "type": "gauge",
                  "entity": "sensor.ac_loads",
                  "min": 0,
                  "max": 5000,
                  "needle": true,
                  "severity": {
                    "green": 0,
                    "yellow": 1700,
                    "red": 4000
                  },
                  "name": "AC loads on Inverter"
                },
                {
                  "type": "gauge",
                  "entity": "sensor.pv_power",
                  "name": "Solar PV Power",
                  "min": 0,
                  "max": 2650,
                  "needle": true,
                  "severity": {
                    "green": 850,
                    "yellow": 300,
                    "red": 0
                  }
                }
              ]
            },
            {
              "type": "horizontal-stack",
              "cards": [
                {
                  "type": "gauge",
                  "entity": "sensor.time_left_on_battery_zero",
                  "name": "Time to Empty",
                  "unit": "Hours",
                  "min": 0,
                  "max": 24,
                  "needle": true,
                  "severity": {
                    "green": 5,
                    "yellow": 3,
                    "red": 0
                  }
                },
                {
                  "type": "gauge",
                  "entity": "sensor.time_left_on_battery_min_soc",
                  "name": "Time to Min SoC",
                  "unit": "Hours",
                  "min": 0,
                  "max": 24,
                  "needle": true,
                  "severity": {
                    "green": 3,
                    "yellow": 1,
                    "red": 0
                  }
                }
              ],
              "title": "Time Left on Battery"
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "vertical-stack",
                  "cards": [
                    {
                      "type": "entities",
                      "entities": [
                        {
                          "entity": "sensor.load_shedding_stage_capetown"
                        },
                        {
                          "entity": "sensor.load_shedding_stage_eskom"
                        }
                      ]
                    },
                    {
                      "type": "markdown",
                      "content": "{% set stage_sensor = \"sensor.load_shedding_stage_eskom\" %} {% set area_sensor = \"sensor.load_shedding_area_capetown_9_thornton\" %} {% set start_time = state_attr(stage_sensor, \"start_time\") %} {% set end_time = state_attr(stage_sensor, \"end_time\") %} {% set area_schedule = state_attr(area_sensor, \"forecast\") %} {% if area_schedule %}\n  {% set start_time = area_schedule[0].start_time %}\n  {% set end_time = area_schedule[0].end_time %}\n  {% if is_state(area_sensor, \"off\") %}\n    {% set starts_in = timedelta(minutes=state_attr(area_sensor, \"starts_in\")) %}\n    {% if is_state_attr(stage_sensor, \"stage\", 0) or starts_in.seconds > 86400  %}\n      <ha-alert alert-type=\"success\">{{ states(stage_sensor) }}</ha-alert>\n    {% elif not is_state_attr(stage_sensor, \"stage\", 0) and 0 < starts_in.seconds <= 86400 %}\n      <ha-alert alert-type=\"warning\">Load Shedding starts in {{ starts_in.seconds // 3600 }}h{{ (starts_in.seconds // 60) - (starts_in.seconds // 3600 * 60) }}m ({{ as_timestamp(start_time) | timestamp_custom(\"%H:%M\", True) }})</ha-alert>\n    {% endif %}\n  {% else %}\n    {% set ends_in = timedelta(minutes=state_attr(area_sensor, \"ends_in\")) %}\n    {% if is_state_attr(stage_sensor, \"stage\", 0) or ends_in.seconds > 86400 %}\n      <ha-alert alert-type=\"success\">{{ states(stage_sensor) }}</ha-alert>\n    {% elif not is_state_attr(stage_sensor, \"stage\", 0) and 0 < ends_in.seconds <= 86400 %}\n      <ha-alert alert-type=\"error\">Load Shedding ends in {{ ends_in.seconds // 3600 }}h{{ (ends_in.seconds // 60) - (ends_in.seconds // 3600 * 60) }}m  ({{ as_timestamp(end_time) | timestamp_custom(\"%H:%M\", True) }})</ha-alert>\n    {% endif %}\n  {% endif %}\n{% endif %} {% set area_forecast = state_attr(area_sensor, \"forecast\" )%} {% if area_forecast %} <table width=\"100%\"  border=0>\n  <tbody>\n  <tr>\n    <td width=\"34px\"><ha-icon icon=\"mdi:calendar\"></ha-icon></td>\n    <td align=\"left\" colspan=3>Forecast : :  {{ state_attr(area_sensor, \"friendly_name\") }}</td>\n  </tr>\n  {% for forecast in area_forecast[:3] %}\n  <tr>\n    <td></td>\n    <td align=\"left\">\n    {{ as_timestamp(forecast.start_time) | timestamp_custom(\"%-d %B\", True) }}\n    </td>\n    <td align=\"left\">\n    {{ as_timestamp(forecast.start_time) | timestamp_custom(\"%H:%M\", True) }} - {{ as_timestamp(forecast.end_time) | timestamp_custom(\"%H:%M\", True) }}\n    </td>\n    <td align=\"right\">Stage {{ forecast.stage }}</td>\n  </tr>\n  {% endfor %}\n  </tbody>\n</table> {% endif %} {% set area_schedule = state_attr(area_sensor, \"schedule\" )%} {% if area_schedule %} <table width=\"100%\"  border=0>\n  <tbody>\n  <tr>\n    <td width=\"34px\"><ha-icon icon=\"mdi:calendar\"></ha-icon></td>\n    <td align=\"left\" colspan=3>Schedule : : {{ state_attr(area_sensor, \"friendly_name\") }}</td>\n  </tr>\n  {% for slot in area_schedule[:3] %}\n  <tr>\n    <td></td>\n    <td align=\"left\">\n    {{ as_timestamp(slot.start_time) | timestamp_custom(\"%-d %B\", True) }}\n    </td>\n    <td align=\"left\">\n    {{ as_timestamp(slot.start_time) | timestamp_custom(\"%H:%M\", True) }} - {{ as_timestamp(slot.end_time) | timestamp_custom(\"%H:%M\", True) }}\n    </td>\n    <td align=\"right\">Stage {{ slot.stage }}</td>\n  </tr>\n  {% endfor %}\n  </tbody>\n</table> {% endif %} {% set area_schedule = state_attr(area_sensor, \"schedule\" )%} {% if area_schedule %} <table width=\"100%\"  border=0>\n  <tbody>\n  <tr>\n    <td width=\"34px\"><ha-icon icon=\"mdi:calendar\"></ha-icon></td>\n    <td align=\"left\" colspan=3>Schedule : : {{ state_attr(area_sensor, \"friendly_name\") }}</td>\n  </tr>\n  {% for slot in area_schedule[:3] %}\n  <tr>\n    <td></td>\n    <td align=\"left\">\n    {{ as_timestamp(slot.start_time) | timestamp_custom(\"%-d %B\", True) }}\n    </td>\n    <td align=\"left\">\n    {{ as_timestamp(slot.start_time) | timestamp_custom(\"%H:%M\", True) }} - {{ as_timestamp(slot.end_time) | timestamp_custom(\"%H:%M\", True) }}\n    </td>\n    <td align=\"right\">Stage {{ slot.stage }}</td>\n  </tr>\n  {% endfor %}\n  </tbody>\n</table> {% endif %}\n"
                    }
                  ]
                },
                {
                  "type": "custom:mushroom-template-card",
                  "primary": "Quota {{state_attr(entity, \"count\")}}/{{state_attr(entity, \"limit\")}}",
                  "secondary": "API Allowed Quota",
                  "icon": "mdi:lightning-bolt",
                  "entity": "sensor.load_shedding_sepush_api_quota",
                  "tap_action": {
                    "action": "more-info"
                  },
                  "icon_color": "",
                  "badge_icon": "",
                  "fill_container": false,
                  "multiline_secondary": false
                }
              ]
            },
            {
              "initial_view": "listWeek",
              "type": "calendar",
              "entities": [
                "calendar.chantel_swart",
                "calendar.holidays_in_south_africa",
                "calendar.dvdmerwe_gmail_com"
              ],
              "title": "Our Schedule"
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "media-control",
                  "entity": "media_player.lounge_speaker"
                },
                {
                  "type": "media-control",
                  "entity": "media_player.googlehome1000"
                },
                {
                  "type": "media-control",
                  "entity": "media_player.lounge_tv"
                }
              ]
            },
            {
              "type": "vertical-stack",
              "title": "Alarms",
              "cards": [
                {
                  "type": "custom:button-card",
                  "color_type": "icon",
                  "entity": "sensor.active_input_source",
                  "name": "Grid Status",
                  "show_label": true,
                  "size": "100%",
                  "layout": "icon_name_state2nd",
                  "styles": {
                    "card": [
                      {
                        "height": "100px"
                      }
                    ]
                  },
                  "state": [
                    {
                      "value": 1,
                      "icon": "mdi:transmission-tower",
                      "label": "Ok",
                      "styles": {
                        "card": [
                          {
                            "background-color": "green"
                          }
                        ]
                      }
                    },
                    {
                      "value": 240,
                      "icon": "mdi:transmission-tower-off",
                      "label": "LOST",
                      "styles": {
                        "card": [
                          {
                            "background-color": "red"
                          },
                          {
                            "animation": "blink 1s ease infinite"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "type": "custom:button-card",
                  "color_type": "icon",
                  "entity": "sensor.solar_battery_general_alarm",
                  "name": "Battery Status",
                  "show_label": true,
                  "size": "100%",
                  "layout": "icon_name_state2nd",
                  "state": [
                    {
                      "value": 0,
                      "icon": "mdi:battery-charging",
                      "label": "Ok",
                      "styles": {
                        "card": [
                          {
                            "background-color": "green"
                          }
                        ]
                      }
                    },
                    {
                      "value": 2,
                      "icon": "mdi:battery-unknown",
                      "label": "ALARM",
                      "styles": {
                        "card": [
                          {
                            "background-color": "red"
                          },
                          {
                            "animation": "blink 1s ease infinite"
                          }
                        ]
                      }
                    }
                  ],
                  "styles": {
                    "card": [
                      {
                        "height": "100px"
                      }
                    ]
                  }
                },
                {
                  "type": "custom:button-card",
                  "color_type": "icon",
                  "icon": "mdi:solar-power-variant",
                  "entity": "sensor.solar_charger_error",
                  "name": "Solar Charger Status",
                  "show_label": true,
                  "state": [
                    {
                      "value": 0,
                      "label": "Ok",
                      "styles": {
                        "card": [
                          {
                            "background-color": "green"
                          }
                        ]
                      }
                    },
                    {
                      "value": 1,
                      "label": "Battery Temp",
                      "styles": {
                        "card": [
                          {
                            "background-color": "red"
                          },
                          {
                            "animation": "blink 2s ease infinite"
                          }
                        ]
                      }
                    },
                    {
                      "value": 2,
                      "label": "Battery Voltage",
                      "styles": {
                        "card": [
                          {
                            "background-color": "red"
                          },
                          {
                            "animation": "blink 2s ease infinite"
                          }
                        ]
                      }
                    },
                    {
                      "value": 3,
                      "label": "Batt+ Wiring",
                      "styles": {
                        "card": [
                          {
                            "background-color": "red"
                          },
                          {
                            "animation": "blink 2s ease infinite"
                          }
                        ]
                      }
                    },
                    {
                      "value": 4,
                      "label": "Batt- Wiring",
                      "styles": {
                        "card": [
                          {
                            "background-color": "red"
                          },
                          {
                            "animation": "blink 2s ease infinite"
                          }
                        ]
                      }
                    },
                    {
                      "value": 5,
                      "label": "Batt Temp Sensor",
                      "styles": {
                        "card": [
                          {
                            "background-color": "red"
                          },
                          {
                            "animation": "blink 2s ease infinite"
                          }
                        ]
                      }
                    }
                  ],
                  "size": "100%",
                  "layout": "icon_name_state2nd",
                  "styles": {
                    "card": [
                      {
                        "height": "100px"
                      }
                    ]
                  }
                },
                {
                  "type": "custom:button-card",
                  "color_type": "icon",
                  "icon": "mdi:power-socket-fr",
                  "entity": "sensor.ac_loads",
                  "name": "AC Load Overload",
                  "show_label": true,
                  "size": "100%",
                  "layout": "icon_name_state2nd",
                  "styles": {
                    "card": [
                      {
                        "height": "100px"
                      }
                    ]
                  },
                  "state": [
                    {
                      "value": 4700,
                      "operator": ">",
                      "color": "white",
                      "label": "ALARM!",
                      "styles": {
                        "card": [
                          {
                            "background-color": "red"
                          },
                          {
                            "animation": "blink 1s ease infinite"
                          }
                        ]
                      }
                    },
                    {
                      "value": 4000,
                      "operator": ">",
                      "color": "white",
                      "label": "WARNING!",
                      "styles": {
                        "card": [
                          {
                            "background-color": "yellow"
                          },
                          {
                            "animation": "blink 2s ease infinite"
                          }
                        ]
                      }
                    },
                    {
                      "value": 4700,
                      "operator": "<=",
                      "color": "white",
                      "label": "Ok",
                      "styles": {
                        "card": [
                          {
                            "background-color": "green"
                          }
                        ]
                      }
                    }
                  ]
                }
              ]
            },
            {
              "camera_view": "auto",
              "type": "picture-glance",
              "title": "WiFi Camera",
              "entities": [
                {
                  "entity": "camera.wifi_camera"
                }
              ],
              "camera_image": "camera.nvr_sub_7"
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "WEATHER",
          "path": "weather",
          "badges": [],
          "cards": [
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "sensor.thornton_abs_pressure",
                  "name": "Abs pressure"
                },
                {
                  "entity": "sensor.thornton_dew_point",
                  "name": "Dew point"
                },
                {
                  "entity": "sensor.thornton_event_rain",
                  "name": "Event rain"
                },
                {
                  "entity": "sensor.thornton_feels_like",
                  "name": "Feels like"
                },
                {
                  "entity": "sensor.thornton_hourly_rain_rate",
                  "name": "Hourly rain rate"
                },
                {
                  "entity": "sensor.thornton_humidity",
                  "name": "Humidity"
                },
                {
                  "entity": "sensor.thornton_humidity_in",
                  "name": "Humidity in"
                },
                {
                  "entity": "sensor.thornton_inside_temp",
                  "name": "Inside temp"
                },
                {
                  "entity": "sensor.thornton_last_rain",
                  "name": "Last rain"
                },
                {
                  "entity": "sensor.thornton_lifetime_rain",
                  "name": "Lifetime rain"
                },
                {
                  "entity": "sensor.thornton_max_gust",
                  "name": "Max gust"
                },
                {
                  "entity": "sensor.thornton_monthly_rain",
                  "name": "Monthly rain"
                },
                "sensor.thornton_temp",
                "sensor.thornton_daily_rain",
                {
                  "entity": "sensor.thornton_rel_pressure",
                  "name": "Rel pressure"
                },
                {
                  "entity": "sensor.thornton_solar_rad",
                  "name": "Solar rad"
                },
                {
                  "entity": "sensor.thornton_solar_rad_lx",
                  "name": "Solar rad"
                },
                {
                  "entity": "sensor.thornton_uv_index",
                  "name": "UV index"
                },
                {
                  "entity": "sensor.thornton_weekly_rain",
                  "name": "Weekly rain"
                },
                {
                  "entity": "sensor.thornton_wind_dir",
                  "name": "Wind dir"
                },
                {
                  "entity": "sensor.thornton_wind_gust",
                  "name": "Wind gust"
                },
                {
                  "entity": "sensor.thornton_wind_speed",
                  "name": "Wind speed"
                }
              ],
              "title": "Our Weather Station"
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "binary_sensor.thornton_battery",
                  "name": "Battery"
                },
                {
                  "entity": "binary_sensor.thornton_co2_battery",
                  "name": "CO2 battery"
                }
              ],
              "title": "Our Weather Station",
              "state_color": true
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "Network",
          "path": "network",
          "icon": "",
          "visible": [
            {
              "user": "716657a802fc4eca995929175c03c646"
            }
          ],
          "badges": [],
          "cards": [
            {
              "type": "horizontal-stack",
              "cards": [
                {
                  "type": "gauge",
                  "entity": "sensor.speedtest_ping",
                  "min": 0,
                  "max": 100,
                  "needle": true,
                  "severity": {
                    "green": 0,
                    "yellow": 25,
                    "red": 60
                  },
                  "name": "Ping"
                },
                {
                  "type": "gauge",
                  "entity": "sensor.speedtest_download",
                  "min": 0,
                  "max": 250,
                  "severity": {
                    "green": 190,
                    "yellow": 130,
                    "red": 0
                  },
                  "needle": true,
                  "name": "Download Speed"
                }
              ]
            },
            {
              "type": "horizontal-stack",
              "cards": [
                {
                  "type": "gauge",
                  "entity": "sensor.adguard_home_average_processing_speed",
                  "needle": true,
                  "severity": {
                    "green": 0,
                    "yellow": 100,
                    "red": 150
                  },
                  "min": 0,
                  "max": 200
                },
                {
                  "show_name": true,
                  "show_icon": true,
                  "type": "button",
                  "tap_action": {
                    "action": "more-info"
                  },
                  "entity": "switch.adguard_home_protection",
                  "show_state": true,
                  "hold_action": {
                    "action": "toggle"
                  }
                }
              ]
            },
            {
              "show_name": true,
              "show_icon": true,
              "show_state": true,
              "type": "glance",
              "entities": [
                {
                  "entity": "sensor.gadgeteer_wordpress"
                },
                {
                  "entity": "sensor.photos"
                },
                {
                  "entity": "sensor.openwebrx"
                },
                {
                  "entity": "sensor.nextcloud"
                }
              ],
              "state_color": true,
              "columns": 2,
              "title": "Web Services"
            },
            {
              "type": "horizontal-stack",
              "cards": [
                {
                  "type": "gauge",
                  "entity": "sensor.glances_ram_used_percent",
                  "name": "OMV RAM Used",
                  "unit": "%",
                  "min": 0,
                  "max": 100,
                  "needle": true,
                  "severity": {
                    "green": 0,
                    "yellow": 80,
                    "red": 90
                  }
                },
                {
                  "type": "gauge",
                  "entity": "sensor.glances_etc_resolv_conf_used_percent",
                  "name": "OMV Disk Used",
                  "min": 0,
                  "max": 100,
                  "needle": true,
                  "severity": {
                    "green": 0,
                    "yellow": 80,
                    "red": 90
                  }
                }
              ]
            },
            {
              "type": "horizontal-stack",
              "cards": [
                {
                  "type": "gauge",
                  "entity": "sensor.glances_gadgeteer_co_za_memory_usage",
                  "name": "VPS RAM Used",
                  "unit": "%",
                  "min": 0,
                  "max": 100,
                  "needle": true,
                  "severity": {
                    "green": 0,
                    "yellow": 80,
                    "red": 90
                  }
                },
                {
                  "type": "gauge",
                  "entity": "sensor.glances_gadgeteer_co_za_etc_hosts_disk_usage",
                  "name": "VPS Disk Used",
                  "min": 0,
                  "max": 100,
                  "needle": true,
                  "severity": {
                    "green": 0,
                    "yellow": 80,
                    "red": 90
                  }
                }
              ]
            },
            {
              "type": "custom:mini-graph-card",
              "name": "Speedtest Stats - 7 Days",
              "entities": [
                {
                  "entity": "sensor.speedtest_download",
                  "name": "Download"
                },
                {
                  "entity": "sensor.speedtest_upload",
                  "name": "Upload"
                }
              ],
              "icon": "hass:speedometer",
              "height": 200,
              "line_width": 2,
              "align_icon": "right",
              "align_state": "center",
              "show": {
                "fill": true,
                "labels": true,
                "extrema": true
              },
              "hours_to_show": 168
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "button.rt_ac88u_check_for_updates"
                },
                {
                  "entity": "light.rt_ac88u_led"
                },
                {
                  "entity": "button.rt_ac88u_reboot"
                },
                {
                  "entity": "button.rt_ac88u_restart_wireless"
                },
                {
                  "entity": "button.rt_ac88u_restart_wired"
                },
                {
                  "entity": "button.rt_ac88u_refresh_clients"
                },
                {
                  "entity": "button.rt_ac88u_restart_firewall"
                },
                {
                  "entity": "button.rt_ac88u_restart_http_daemon"
                },
                {
                  "entity": "sensor.rt_ac88u_connected_devices"
                },
                {
                  "entity": "sensor.rt_ac88u_wan_download_speed"
                },
                {
                  "entity": "sensor.rt_ac88u_wan_upload_speed"
                }
              ],
              "title": "Home Router",
              "state_color": true
            },
            {
              "type": "horizontal-stack",
              "cards": [
                {
                  "type": "gauge",
                  "entity": "sensor.rt_ac88u_temperature_cpu",
                  "needle": true,
                  "severity": {
                    "green": 0,
                    "yellow": 55,
                    "red": 85
                  },
                  "name": "Router CPU"
                },
                {
                  "type": "gauge",
                  "entity": "sensor.rt_ac88u_ram",
                  "name": "Router RAM",
                  "needle": true,
                  "severity": {
                    "green": 0,
                    "yellow": 65,
                    "red": 85
                  }
                }
              ]
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "HAM",
          "path": "ham",
          "visible": [
            {
              "user": "716657a802fc4eca995929175c03c646"
            }
          ],
          "badges": [],
          "cards": [
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "gauge",
                  "entity": "sensor.ham_radios_energy_power",
                  "min": 0,
                  "max": 360,
                  "needle": true,
                  "severity": {
                    "green": 0,
                    "yellow": 31,
                    "red": 290
                  },
                  "name": "Ham Radio DC Power"
                }
              ]
            },
            {
              "type": "map",
              "entities": [
                {
                  "entity": "device_tracker.zs1dcc_1"
                }
              ],
              "title": "APRS Devices"
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "custom:restriction-card",
                  "duration": 10,
                  "restrictions": {
                    "confirm": {
                      "text": "Are you SURE? This will turn off radios!"
                    }
                  },
                  "card": {
                    "type": "entities",
                    "entities": [
                      {
                        "entity": "switch.ham_radios_ham_radios",
                        "name": "Ham Radios"
                      }
                    ]
                  }
                }
              ],
              "title": "Ham Radios Power Switch"
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "sensor.ham_radios_energy_power",
                  "name": "ENERGY Power"
                },
                {
                  "entity": "sensor.ham_radios_energy_current",
                  "name": "ENERGY Current"
                },
                {
                  "entity": "sensor.ham_radios_energy_apparentpower",
                  "name": "ENERGY ApparentPower"
                },
                {
                  "entity": "sensor.ham_radios_energy_voltage",
                  "name": "ENERGY Voltage"
                },
                {
                  "entity": "sensor.ham_radios_energy_today",
                  "name": "ENERGY Today"
                },
                {
                  "entity": "sensor.ham_radios_energy_total",
                  "name": "ENERGY Total"
                },
                {
                  "entity": "sensor.ham_radios_energy_yesterday",
                  "name": "ENERGY Yesterday"
                },
                {
                  "entity": "sensor.ham_radios_status",
                  "name": "Status"
                }
              ],
              "title": "Ham Radios Power Usage"
            }
          ]
        },
        {
          "theme": "Backend-selected",
          "title": "SOLAR",
          "path": "solar",
          "type": "custom:masonry-layout",
          "layout": {
            "width": 300,
            "max_cols": 6
          },
          "badges": [],
          "cards": [
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "gauge",
                  "entity": "sensor.battery_soc",
                  "needle": true,
                  "name": "Battery Charge",
                  "severity": {
                    "green": 50,
                    "yellow": 25,
                    "red": 0
                  }
                },
                {
                  "type": "gauge",
                  "entity": "sensor.ac_loads",
                  "min": 0,
                  "max": 5000,
                  "needle": true,
                  "severity": {
                    "green": 0,
                    "yellow": 1700,
                    "red": 4000
                  },
                  "name": "Inverter AC load"
                },
                {
                  "type": "gauge",
                  "entity": "sensor.pv_power",
                  "name": "Solar PV Power",
                  "min": 0,
                  "max": 2650,
                  "needle": true,
                  "severity": {
                    "green": 850,
                    "yellow": 300,
                    "red": 0
                  }
                }
              ]
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "sensor.battery_voltage"
                },
                {
                  "entity": "sensor.battery_current"
                }
              ],
              "title": "Battery Stats",
              "state_color": false,
              "footer": {
                "type": "graph",
                "entity": "sensor.battery_soc",
                "detail": 1
              }
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "gauge",
                  "entity": "sensor.battery_power",
                  "name": "Battery Net Power",
                  "min": -5000,
                  "max": 5000,
                  "severity": {
                    "green": 1,
                    "yellow": -4999,
                    "red": -5000
                  },
                  "needle": true
                },
                {
                  "type": "gauge",
                  "entity": "sensor.solar_battery_temperature",
                  "name": "Battery Temp",
                  "unit": "C",
                  "min": 0,
                  "max": 55,
                  "needle": true,
                  "segments": [
                    {
                      "from": 0,
                      "color": "#b83c2c"
                    },
                    {
                      "from": 10,
                      "color": "yellow"
                    },
                    {
                      "from": 15,
                      "color": "green"
                    },
                    {
                      "from": 40,
                      "color": "yellow"
                    },
                    {
                      "from": 45,
                      "color": "#b83c2c"
                    }
                  ]
                }
              ]
            },
            {
              "type": "horizontal-stack",
              "cards": [
                {
                  "type": "gauge",
                  "entity": "sensor.time_left_on_battery_zero",
                  "name": "Time to Empty",
                  "unit": "Hours",
                  "min": 0,
                  "max": 24,
                  "needle": true,
                  "severity": {
                    "green": 5,
                    "yellow": 3,
                    "red": 0
                  }
                },
                {
                  "type": "gauge",
                  "entity": "sensor.time_left_on_battery_min_soc",
                  "name": "Time to Min SoC",
                  "unit": "Hours",
                  "min": 0,
                  "max": 24,
                  "needle": true,
                  "severity": {
                    "green": 3,
                    "yellow": 1,
                    "red": 0
                  }
                }
              ],
              "title": "Time Left on Battery"
            },
            {
              "type": "horizontal-stack",
              "cards": [
                {
                  "type": "custom:button-card",
                  "icon": "mdi:transmission-tower",
                  "entity": "sensor.power_usage",
                  "label": "Eskom Grid Power",
                  "show_state": true,
                  "show_name": false,
                  "show_label": true,
                  "size": "15%",
                  "styles": null,
                  "height": "100px",
                  "state": [
                    {
                      "value": 1500,
                      "operator": "<=",
                      "color": "yellow"
                    },
                    {
                      "value": 1500,
                      "operator": ">",
                      "color": "orange"
                    }
                  ]
                },
                {
                  "type": "custom:button-card",
                  "icon": "mdi:cash-multiple",
                  "entity": "sensor.monthly_energy_cost",
                  "label": "Monthly Cost",
                  "show_state": true,
                  "show_name": false,
                  "show_label": true,
                  "size": "15%",
                  "styles": null,
                  "height": "100px",
                  "color": "rgb(0,255,0)"
                }
              ],
              "title": "Eskom Power"
            },
            {
              "type": "horizontal-stack",
              "cards": [
                {
                  "type": "custom:button-card",
                  "entity": "sensor.ve_bus_state",
                  "icon": "mdi:solar-power-variant",
                  "show_state": false,
                  "show_label": true,
                  "state": [
                    {
                      "value": 0,
                      "color": "var(--disabled-text-color)",
                      "icon": "mdi:power-plug-off-outline",
                      "label": "Off"
                    },
                    {
                      "value": 1,
                      "color": "rgb(255,255,0)",
                      "icon": "mdi:lightning-bolt-circle",
                      "label": "Low Power"
                    },
                    {
                      "value": 2,
                      "color": "rgb(255,0,0)",
                      "icon": "mdi:alert",
                      "label": "Fault"
                    },
                    {
                      "value": 3,
                      "color": "rgb(0,255,0)",
                      "label": "[[[\n  if (states[\"sensor.battery_power\"].state <= 0) return 'Discharging';\n  else return 'Bulk Charge';\n]]]\n"
                    },
                    {
                      "value": 4,
                      "color": "rgb(0,128,0)",
                      "label": "Absorption"
                    },
                    {
                      "value": 5,
                      "color": "rgb(0,128,128)",
                      "label": "Float"
                    },
                    {
                      "value": 6,
                      "color": "rgb(0,206,209)",
                      "label": "Storage"
                    },
                    {
                      "value": 7,
                      "color": "rgb(173,216,230)",
                      "label": "Equalize"
                    },
                    {
                      "value": 8,
                      "color": "rgb(138,43,226)",
                      "label": "Pass Through"
                    },
                    {
                      "value": 9,
                      "color": "rgb(255,0,255)",
                      "label": "Inverting"
                    },
                    {
                      "value": 10,
                      "color": "rgb(184,134,11)",
                      "label": "Power Assist"
                    },
                    {
                      "value": 11,
                      "color": "rgb(218,165,32)",
                      "label": "Power Supply"
                    },
                    {
                      "value": 252,
                      "color": "rgb(0,255,0)",
                      "label": "Ext. Control"
                    }
                  ]
                },
                {
                  "type": "custom:button-card",
                  "entity": "sensor.victron_ess_battery_life_state",
                  "icon": "mdi:battery-heart",
                  "show_state": false,
                  "show_label": true,
                  "state": [
                    {
                      "value": 0,
                      "color": "var(--disabled-text-color)",
                      "icon": "mdi:battery-off-outline",
                      "label": "Unused"
                    },
                    {
                      "value": 1,
                      "color": "rgb(218,165,32)",
                      "icon": "mdi:battery-sync-outline",
                      "label": "Restarting"
                    },
                    {
                      "value": 2,
                      "color": "rgb(0,255,0)",
                      "label": "Self-Consumption"
                    },
                    {
                      "value": 3,
                      "color": "rgb(0,255,0)",
                      "label": "Self-Consumption"
                    },
                    {
                      "value": 4,
                      "color": "rgb(0,255,0)",
                      "label": "Self-Consumption"
                    },
                    {
                      "value": 5,
                      "color": "rgb(0,255,0)",
                      "label": "Discharge Disabled"
                    },
                    {
                      "value": 6,
                      "color": "rgb(0,255,0)",
                      "icon": "mdi:battery-charging-medium",
                      "label": "Force Charge"
                    },
                    {
                      "value": 7,
                      "color": "rgb(0,255,0)",
                      "icon": "mdi:battery-charging-50",
                      "label": "Sustain"
                    },
                    {
                      "value": 9,
                      "color": "rgb(0,255,0)",
                      "icon": "mdi:battery-charging-100",
                      "label": "Keep batteries charged"
                    },
                    {
                      "value": 10,
                      "color": "rgb(0,255,0)",
                      "icon": "mdi:battery-arrow-down",
                      "label": "Battery Life Disabled"
                    },
                    {
                      "value": 11,
                      "color": "rgb(218,165,32)",
                      "label": "BL Disabled (Low SoC)"
                    },
                    {
                      "value": 12,
                      "color": "rgb(0,255,0)",
                      "icon": "mdi:battery-arrow-up-outline",
                      "label": "Charging"
                    }
                  ]
                }
              ],
              "title": "Victron ESS"
            },
            {
              "type": "vertical-stack",
              "title": "Alarms",
              "cards": [
                {
                  "type": "custom:button-card",
                  "color_type": "icon",
                  "entity": "sensor.active_input_source",
                  "name": "Grid Status",
                  "show_label": true,
                  "size": "100%",
                  "layout": "icon_name_state2nd",
                  "styles": {
                    "card": [
                      {
                        "height": "100px"
                      }
                    ]
                  },
                  "state": [
                    {
                      "value": 1,
                      "icon": "mdi:transmission-tower",
                      "label": "Ok",
                      "styles": {
                        "card": [
                          {
                            "background-color": "green"
                          }
                        ]
                      }
                    },
                    {
                      "value": 240,
                      "icon": "mdi:transmission-tower-off",
                      "label": "LOST",
                      "styles": {
                        "card": [
                          {
                            "background-color": "red"
                          },
                          {
                            "animation": "blink 1s ease infinite"
                          }
                        ]
                      }
                    }
                  ]
                },
                {
                  "type": "custom:button-card",
                  "color_type": "icon",
                  "entity": "sensor.solar_battery_general_alarm",
                  "name": "Battery Status",
                  "show_label": true,
                  "size": "100%",
                  "layout": "icon_name_state2nd",
                  "state": [
                    {
                      "value": 0,
                      "icon": "mdi:battery-charging",
                      "label": "Ok",
                      "styles": {
                        "card": [
                          {
                            "background-color": "green"
                          }
                        ]
                      }
                    },
                    {
                      "value": 2,
                      "icon": "mdi:battery-unknown",
                      "label": "ALARM",
                      "styles": {
                        "card": [
                          {
                            "background-color": "red"
                          },
                          {
                            "animation": "blink 1s ease infinite"
                          }
                        ]
                      }
                    }
                  ],
                  "styles": {
                    "card": [
                      {
                        "height": "100px"
                      }
                    ]
                  }
                },
                {
                  "type": "custom:button-card",
                  "color_type": "icon",
                  "icon": "mdi:solar-power-variant",
                  "entity": "sensor.solar_charger_error",
                  "name": "Solar Charger Status",
                  "show_label": true,
                  "state": [
                    {
                      "value": 0,
                      "label": "Ok",
                      "styles": {
                        "card": [
                          {
                            "background-color": "green"
                          }
                        ]
                      }
                    },
                    {
                      "value": 1,
                      "label": "Battery Temp",
                      "styles": {
                        "card": [
                          {
                            "background-color": "red"
                          },
                          {
                            "animation": "blink 2s ease infinite"
                          }
                        ]
                      }
                    },
                    {
                      "value": 2,
                      "label": "Battery Voltage",
                      "styles": {
                        "card": [
                          {
                            "background-color": "red"
                          },
                          {
                            "animation": "blink 2s ease infinite"
                          }
                        ]
                      }
                    },
                    {
                      "value": 3,
                      "label": "Batt+ Wiring",
                      "styles": {
                        "card": [
                          {
                            "background-color": "red"
                          },
                          {
                            "animation": "blink 2s ease infinite"
                          }
                        ]
                      }
                    },
                    {
                      "value": 4,
                      "label": "Batt- Wiring",
                      "styles": {
                        "card": [
                          {
                            "background-color": "red"
                          },
                          {
                            "animation": "blink 2s ease infinite"
                          }
                        ]
                      }
                    },
                    {
                      "value": 5,
                      "label": "Batt Temp Sensor",
                      "styles": {
                        "card": [
                          {
                            "background-color": "red"
                          },
                          {
                            "animation": "blink 2s ease infinite"
                          }
                        ]
                      }
                    }
                  ],
                  "size": "100%",
                  "layout": "icon_name_state2nd",
                  "styles": {
                    "card": [
                      {
                        "height": "100px"
                      }
                    ]
                  }
                },
                {
                  "type": "custom:button-card",
                  "color_type": "icon",
                  "icon": "mdi:power-socket-fr",
                  "entity": "sensor.ac_loads",
                  "name": "AC Load Overload",
                  "show_label": true,
                  "size": "100%",
                  "layout": "icon_name_state2nd",
                  "styles": {
                    "card": [
                      {
                        "height": "100px"
                      }
                    ]
                  },
                  "state": [
                    {
                      "value": 4700,
                      "operator": ">",
                      "color": "white",
                      "label": "ALARM!",
                      "styles": {
                        "card": [
                          {
                            "background-color": "red"
                          },
                          {
                            "animation": "blink 1s ease infinite"
                          }
                        ]
                      }
                    },
                    {
                      "value": 4000,
                      "operator": ">",
                      "color": "white",
                      "label": "WARNING!",
                      "styles": {
                        "card": [
                          {
                            "background-color": "yellow"
                          },
                          {
                            "animation": "blink 2s ease infinite"
                          }
                        ]
                      }
                    },
                    {
                      "value": 4700,
                      "operator": "<=",
                      "color": "white",
                      "label": "Ok",
                      "styles": {
                        "card": [
                          {
                            "background-color": "green"
                          }
                        ]
                      }
                    }
                  ]
                }
              ]
            },
            {
              "show_name": true,
              "show_icon": true,
              "show_state": true,
              "type": "glance",
              "entities": [
                {
                  "entity": "sensor.home_cloud_ceiling",
                  "name": "Cloud Cover"
                },
                {
                  "entity": "sensor.home_cloud_cover",
                  "name": "Today"
                },
                {
                  "entity": "sensor.home_cloud_cover_day_1",
                  "name": "Tomorrow"
                },
                {
                  "entity": "sensor.home_cloud_cover_day_2",
                  "name": "Next"
                }
              ],
              "title": "Cloud Coverage"
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "sensor.yield_total_yesterday"
                },
                {
                  "entity": "sensor.yield_so_far_today"
                },
                {
                  "entity": "sensor.energy_production_today",
                  "name": "Energy forecast for today"
                },
                {
                  "entity": "sensor.energy_production_tomorrow",
                  "name": "Energy forecast for tomorrow"
                },
                {
                  "entity": "sensor.maximum_charge_power_yesterday"
                },
                {
                  "entity": "sensor.maximum_charge_power_today"
                }
              ],
              "title": "Solar PV Charge Stats",
              "show_header_toggle": false
            },
            {
              "type": "vertical-stack",
              "title": "Battery Charging",
              "cards": [
                {
                  "type": "custom:button-card",
                  "color_type": "icon",
                  "entity": "sensor.victron_ess_battery_life_state",
                  "name": "ESS Battery State",
                  "show_label": true,
                  "color": "green",
                  "state": [
                    {
                      "value": 0,
                      "icon": "mdi:battery-off-outline",
                      "label": "Unused/Disabled"
                    },
                    {
                      "value": 1,
                      "icon": "mdi:car-battery",
                      "label": "Restarting"
                    },
                    {
                      "value": 2,
                      "icon": "mdi:battery-90",
                      "label": "Self-Consumption"
                    },
                    {
                      "value": 3,
                      "icon": "mdi:battery-90",
                      "label": "Self-Consumption"
                    },
                    {
                      "value": 4,
                      "icon": "mdi:battery-90",
                      "label": "Optimised with Battery Life"
                    },
                    {
                      "value": 5,
                      "icon": "mdi:battery-minus-outline",
                      "label": "Discharge Disabled"
                    },
                    {
                      "value": 6,
                      "icon": "mdi:battery-charging-high",
                      "label": "Force Charge"
                    },
                    {
                      "value": 7,
                      "icon": "mdi:battery-30",
                      "label": "Sustain Battery"
                    },
                    {
                      "value": 9,
                      "icon": "mdi:battery-high",
                      "label": "Keep Charged"
                    },
                    {
                      "value": 10,
                      "icon": "mdi:battery-heart",
                      "label": "Optimised without Battery Life"
                    },
                    {
                      "value": 11,
                      "icon": "mdi:battery-outline",
                      "label": "Optimised without Battery Life"
                    }
                  ],
                  "size": "15%",
                  "styles": {
                    "card": [
                      {
                        "height": "100px"
                      }
                    ]
                  }
                },
                {
                  "type": "custom:button-card",
                  "entity": "sensor.victron_battery_min_soc",
                  "icon": "hass:battery",
                  "color": "green",
                  "show_name": false,
                  "show_state": true,
                  "show_label": true,
                  "label": "Current Battery Minimum SoC",
                  "size": "15%",
                  "styles": {
                    "card": [
                      {
                        "height": "100px"
                      }
                    ]
                  }
                },
                {
                  "type": "custom:restriction-card",
                  "duration": 10,
                  "restrictions": {
                    "confirm": {
                      "text": "Are you SURE you want to adjust SoC?"
                    }
                  },
                  "card": {
                    "type": "entities",
                    "entities": [
                      {
                        "entity": "input_number.multiplus_minimum_soc",
                        "name": "Change Minimum SoC",
                        "icon": "mdi:battery"
                      }
                    ]
                  }
                }
              ]
            },
            {
              "type": "iframe",
              "url": "http://192.168.1.205/",
              "aspect_ratio": "50%",
              "title": "Victron CCGX"
            },
            {
              "type": "vertical-stack",
              "cards": [
                {
                  "type": "custom:mini-graph-card",
                  "name": "Solar Stats - 3 Days",
                  "entities": [
                    {
                      "entity": "sensor.pv_power_charger",
                      "name": "Solar Charger Yield"
                    },
                    {
                      "entity": "sensor.radiation_converted",
                      "name": "W/Station Yield"
                    },
                    {
                      "entity": "sensor.power_production_now",
                      "name": "Forecast"
                    }
                  ],
                  "icon": "hass:power",
                  "height": 200,
                  "line_width": 2,
                  "align_icon": "right",
                  "align_state": "center",
                  "decimals": 0,
                  "show": {
                    "fill": true,
                    "labels": true,
                    "extrema": true
                  },
                  "hours_to_show": 72
                }
              ]
            },
            {
              "type": "gauge",
              "entity": "sensor.battery_last_full_days",
              "name": "Battery Last Fully Charged",
              "unit": "Days",
              "min": 0,
              "max": 14,
              "needle": true,
              "severity": {
                "green": 0,
                "yellow": 6,
                "red": 10
              }
            },
            {
              "type": "entities",
              "entities": [
                {
                  "entity": "sensor.ac_loads"
                },
                {
                  "entity": "sensor.custom_ac_loads"
                }
              ]
            }
          ]
        }
      ]
    }
  }
}